<div class="payone-payment secured-installment">
    {% block page_checkout_confirm_payone_card_title_secured_installment %}
        <div class="card-title">
            {{ "PayonePayment.checkoutConfirmPage.defaultCardTitle" | trans }}
        </div>
    {% endblock %}

    {% block page_checkout_confirm_payone_card_content_secured_installment %}
        {% set customerCustomFields = context.customer.customFields %}

        <div class="card">
            <fieldset>
                {% if customerCustomFields is null or customerCustomFields['payone_customer_phone_number'] is not defined or customerCustomFields['payone_customer_phone_number'] is empty %}
                    <div class="form-row col-md-12">
                        <div class="form-group col-md-12">
                            <label class="form-label" for="securedInstallmentPhone">{{ "PayonePayment.securedInstallment.phoneNumber.label" | trans }}{% if not billingAddress.phoneNumber %}{{ "general.required"|trans|sw_sanitize }}{% endif %}</label>
                            <input class="form-control payone-input"
                                   id="securedInstallmentPhone"
                                   name="securedInstallmentPhone"
                                   type="tel"
                                   form="confirmOrderForm"
                                   required="required"/>
                        </div>
                    </div>
                {% endif %}

                {% if customerCustomFields is null or customerCustomFields['payone_customer_birthday'] is not defined or customerCustomFields['payone_customer_birthday'] is empty %}
                    <div class="form-row col-md-12">
                        <div class="form-group col-md-12">
                            <label class="form-label" for="securedInstallmentBirthday">{{ "PayonePayment.securedInstallment.birthday.label" | trans }}{{ "general.required"|trans|sw_sanitize }}</label>
                            <input class="form-control payone-input"
                                   id="securedInstallmentBirthday"
                                   name="securedInstallmentBirthday"
                                   type="date"
                                   form="confirmOrderForm"
                                   required="required"/>
                        </div>
                    </div>
                {% endif %}
            </fieldset>

            <div class="col-md-12">
                <p>
                    {{ "PayonePayment.securedInstallment.general.consentText" |trans|raw }}
                </p>
            </div>
        </div>

        ToDo:

        - IBAN Feld mit dem Namen "securedInstallmentIban"
        - Backendseitig werden per Request an die PAYONE API drei Optionen für die Ratenzahlung geladen und in
          folgender Variable ans Template übergeben. Der Kunde muss die drei Optionen angezeigt bekommen
          und sich eine Option aussuchen können. Von der Option, die ausgewählt wurde, muss die "installmentOptionId"
          als Formular-Feld (hidden input) mit dem Namen "securedInstallmentOptionId" abgeschickt werden.
        {{ dump(page.extensions.payoneSecuredInstallmentOptions.options) }}
    {% endblock %}
</div>
