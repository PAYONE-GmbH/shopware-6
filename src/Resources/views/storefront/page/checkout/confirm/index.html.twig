{% sw_extends '@Storefront/storefront/page/checkout/confirm/index.html.twig' %}

{# shopware-block: 4af14bfe03c7f596186c0ae8a9518892ec60deff157e33869575718fa474f757@v6.6.10.5 #}
{% block page_checkout_confirm_form_submit %}
    {% if constant('PayonePayment\\Provider\\ApplePay\\PaymentMethod\\StandardPaymentMethod::UUID') == context.paymentMethod.id %}
        {% if not page.cart.errors.blockOrder %}
            {% sw_include '@Storefront/storefront/component/checkout/apple-pay-button.html.twig' with {'amount': page.cart.price.totalPrice } %}
        {% endif %}

        <button id="confirmFormSubmit"
                class="submit--hidden d-none"
                form="confirmOrderForm"
                type="submit">
        </button>
    {% else %}
        {{ parent() }}
    {% endif %}

    {% sw_include '@Storefront/storefront/page/checkout/confirm/field/work_order.html.twig' %}
    {% sw_include '@Storefront/storefront/page/checkout/confirm/field/cart_hash.html.twig' %}
    {% sw_include '@Storefront/storefront/page/checkout/confirm/field/payment_method.html.twig' %}
{% endblock %}

{% block base_flashbags_checkout %}
    <div id="payone-apple-pay-error" style="display: none;">
        {% sw_include '@Storefront/storefront/utilities/alert.html.twig' with { type: "danger", content: 'PayonePayment.errorMessages.genericError'|trans  } %}
    </div>

    {{ parent() }}
{% endblock %}

{# shopware-block: 05f6e574cdc97449ee0951de76abff14382a34556fe3517841ae513b2cfc244b@v6.6.10.5 #}
{% block page_checkout_confirm %}
    {{ parent() }}

    {% if page.extensions.payoneDeviceFingerprint and page.extensions.payoneDeviceFingerprint.snippet %}
        {{ page.extensions.payoneDeviceFingerprint.snippet|raw }}
    {% endif %}

    {% if page.extensions.payone and page.extensions.payone.template %}
        {% sw_include page.extensions.payone.template %}
    {% endif %}
{% endblock %}

{% block page_checkout_confirm_payment_shipping %}
    {{ parent() }}

    {% block utilities_checkout_payone_google_pay_button %}
        {% if page.extensions.payoneGooglePayButton %}
            {% sw_include '@PayonePayment/storefront/payone/google-pay/google-pay-button.html.twig' with {
                location: 'cart',
                buttonConfiguration: page.extensions.payoneGooglePayButton
            } %}
        {% endif %}
    {% endblock %}
{% endblock %}
