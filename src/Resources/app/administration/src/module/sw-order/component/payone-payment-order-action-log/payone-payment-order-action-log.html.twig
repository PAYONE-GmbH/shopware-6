{% block payone_payment_order_action_log %}
    <mt-card
        class="payone-payment-order-action-log-card"
        position-identifier="payone-payment-order-action-log-card"
        :title="$t('sw-order.payone-payment.orderActionLog.cardTitle')"
    >
        <sw-data-grid
            v-if="orderActionLogs.length > 0"
            :showSelection="false"
            :dataSource="orderActionLogs"
            :columns="orderActionLogColumns"
            :isLoading="isLoading"
        >
            <template #column-amount="{ item }">
                {{ currencyFilter(item.amount / 100, order.currency.isoCode) }}
            </template>

            <template #column-requestDateTime="{ item }">
                {{ dateFilter(item.requestDateTime, { hour: '2-digit', minute: '2-digit' }) }}
            </template>

            <template #actions="{ item }">
                <sw-context-menu-item @click="openRequest(item)">
                    {{ $t('sw-order.payone-payment.orderActionLog.contextMenu.openRequestDetails') }}
                </sw-context-menu-item>

                <sw-context-menu-item @click="openResponse(item)">
                    {{ $t('sw-order.payone-payment.orderActionLog.contextMenu.openResponseDetails') }}
                </sw-context-menu-item>
            </template>

            <template #action-modals="{ item }">
                <sw-modal
                    v-if="showRequestDetails"
                    :title="$t('sw-order.payone-payment.orderActionLog.requestDetailsModal.title')"
                    variant="large"
                    @modal-close="onCloseRequestModal"
                >
                    <mt-button
                        variant="primary"
                        @click="downloadAsTxt(showRequestDetails, 'request', item.transactionId)"
                    >
                        {{ $t('sw-order.payone-payment.orderActionLog.requestDetailsModal.downloadButton') }}
                    </mt-button>

                    <sw-data-grid
                        :showSelection="false"
                        :showActions="false"
                        :dataSource="toKeyValueSource(showRequestDetails)"
                        :columns="keyValueColumns"
                        :isLoading="isLoading"
                    >
                    </sw-data-grid>
                </sw-modal>

                <sw-modal
                    v-if="showResponseDetails"
                    :title="$t('sw-order.payone-payment.orderActionLog.responseDetailsModal.title')"
                    variant="large"
                    @modal-close="onCloseResponseModal"
                >
                    <mt-button
                        variant="primary"
                        @click="downloadAsTxt(showResponseDetails, 'response', item.transactionId)"
                    >
                        {{ $t('sw-order.payone-payment.orderActionLog.responseDetailsModal.downloadButton') }}
                    </mt-button>

                    <sw-data-grid
                        :showSelection="false"
                        :showActions="false"
                        :dataSource="toKeyValueSource(showResponseDetails)"
                        :columns="keyValueColumns"
                        :isLoading="isLoading"
                    >
                    </sw-data-grid>
                </sw-modal>
            </template>
        </sw-data-grid>

        <sw-empty-state
            v-else
            :absolute="false"
            :title="$t('sw-order.payone-payment.orderActionLog.emptyState.title')"
            :subline="$t('sw-order.payone-payment.orderActionLog.emptyState.subline')"
        >
            <template #icon>
                <img
                    :src="assetFilter('/administration/administration/static/img/empty-states/order-empty-state.svg')"
                    :alt="$t('sw-order.payone-payment.orderActionLog.emptyState.title')"
                />
            </template>
        </sw-empty-state>
    </mt-card>
{% endblock %}