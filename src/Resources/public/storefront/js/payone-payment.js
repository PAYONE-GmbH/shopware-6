!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="undefined/",n(n.s=42)}({0:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(11);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"isNode",value:function(e){if(!e)return!1;if("object"===("undefined"==typeof Node?"undefined":i(Node)))return e instanceof Node;var t="object"===i(e),n="number"==typeof e.nodeType,r="string"==typeof e.nodeName,o=e===document||e===window;return e&&(t&&n&&r||o)}},{key:"hasAttribute",value:function(t,n){if(!e.isNode(t))throw new Error("The element must be a valid HTML Node!");return"function"==typeof t.hasAttribute&&t.hasAttribute(n)}},{key:"getAttribute",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(r&&!1===e.hasAttribute(t,n))throw new Error('The required property "'.concat(n,'" does not exist!'));if("function"==typeof t.getAttribute)return t.getAttribute(n);if(r)throw new Error("This node doesn't support the getAttribute function!")}},{key:"getDataAttribute",value:function(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=n.replace(/^data(|-)/,""),a=r.a.toLowerCamelCase(o,"-");if(e.isNode(t)){if(void 0!==t.dataset){var u=t.dataset[a];if(void 0===u){if(i)throw new Error('The required data attribute "'.concat(n,'" does not exist on ').concat(t,"!"));return u}return r.a.parsePrimitive(u)}if(i)throw new Error("This node doesn't support the dataset attribute!")}else if(i)throw new Error("The passed node is not a valid HTML Node!")}},{key:"querySelector",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(r&&!e.isNode(t))throw new Error("The parent node is not a valid HTML Node!");var i=t.querySelector(n)||!1;if(r&&!1===i)throw new Error('The required element "'.concat(n,'" does not exist in parent node!'));return i}},{key:"querySelectorAll",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(r&&!e.isNode(t))throw new Error("The parent node is not a valid HTML Node!");var i=t.querySelectorAll(n);if(0===i.length&&(i=!1),r&&!1===i)throw new Error('At least one item of "'.concat(n,'" must exist in parent node!'));return i}}],(n=null)&&o(t.prototype,n),a&&o(t,a),e}()},11:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return i});var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"ucFirst",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"lcFirst",value:function(e){return e.charAt(0).toLowerCase()+e.slice(1)}},{key:"toDashCase",value:function(e){return e.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()}},{key:"toLowerCamelCase",value:function(t,n){var r=e.toUpperCamelCase(t,n);return e.lcFirst(r)}},{key:"toUpperCamelCase",value:function(t,n){return n?t.split(n).map(function(t){return e.ucFirst(t.toLowerCase())}).join(""):e.ucFirst(t.toLowerCase())}},{key:"parsePrimitive",value:function(e){try{return/^\d+(.|,)\d+$/.test(e)&&(e=e.replace(",",".")),JSON.parse(e)}catch(t){return e.toString()}}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}()},15:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return i});var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._el=t,t.$emitter=this,this._listeners=[]}var t,n,i;return t=e,(n=[{key:"publish",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new CustomEvent(e,{detail:t});this.el.dispatchEvent(n)}},{key:"subscribe",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this,i=e.split("."),o=n.scope?t.bind(n.scope):t;if(n.once&&!0===n.once){var a=o;o=function(t){r.unsubscribe(e),a(t)}}return this.el.addEventListener(i[0],o),this.listeners.push({splitEventName:i,opts:n,cb:o}),!0}},{key:"unsubscribe",value:function(e){var t=this,n=e.split(".");return this.listeners=this.listeners.reduce(function(e,r){return r.splitEventName.sort().toString()===n.sort().toString()?(t.el.removeEventListener(r.splitEventName[0],r.cb),e):(e.push(r),e)},[]),!0}},{key:"reset",value:function(){var e=this;return this.listeners.forEach(function(t){e.el.removeEventListener(t.splitEventName[0],t.cb)}),this.listeners=[],!0}},{key:"el",get:function(){return this._el},set:function(e){this._el=e}},{key:"listeners",get:function(){return this._listeners},set:function(e){this._listeners=e}}])&&r(t.prototype,n),i&&r(t,i),e}()},2:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(7),i=n.n(r),o=n(0),a=n(11),u=n(15);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!o.a.isNode(t))throw new Error("There is no valid element given.");this.el=t,this.$emitter=new u.a(this.el),this._pluginName=this._getPluginName(r),this.options=this._mergeOptions(n),this._initialized=!1,this._registerInstance(),this._init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){throw new Error('The "init" method for the plugin "'.concat(this._pluginName,'" is not defined.'))}},{key:"update",value:function(){}},{key:"_init",value:function(){this._initialized||(this.init(),this._initialized=!0)}},{key:"_update",value:function(){this._initialized&&this.update()}},{key:"_mergeOptions",value:function(e){var t=a.a.toDashCase(this._pluginName),n=o.a.getDataAttribute(this.el,"data-".concat(t,"-config"),!1),r=o.a.getAttribute(this.el,"data-".concat(t,"-options"),!1),u=[this.constructor.options,this.options,e];n&&u.push(window.PluginConfigManager.get(this._pluginName,n));try{r&&u.push(JSON.parse(r))}catch(e){throw console.error(this.el),new Error('The data attribute "data-'.concat(t,'-options" could not be parsed to json: ').concat(e.message))}return i.a.all(u.map(function(e){return e||{}}))}},{key:"_registerInstance",value:function(){window.PluginManager.getPluginInstancesFromElement(this.el).set(this._pluginName,this),window.PluginManager.getPlugin(this._pluginName,!1).get("instances").push(this)}},{key:"_getPluginName",value:function(e){return e||(e=this.constructor.name),e}}])&&c(t.prototype,n),r&&c(t,r),e}()},40:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(2);n(40);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s,l,f,d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,u(t).apply(this,arguments))}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["a"]),n=t,(i=[{key:"init",value:function(){var e=this;this.iframe=null,this.orderFormDisabled=!1,this.createScript(function(){var t=e.getClientConfig([]);e.iframe=new window.Payone.ClientApi.HostedIFrames(t,[]),document.getElementById("confirmOrderForm").addEventListener("submit",e.handleOrderSubmit)})}},{key:"getSelectStyle",value:function(){return["width: 100%;","height: calc(1.5em + 1.45rem);","padding: .5625rem;","color: #8798a9;","vertical-align: middle;","line-height: 1.5;","font-weight: 500;","background-color: #fff;","border: .0625rem solid #d1d9e0;","border-radius: 3px"].concat()}},{key:"getFieldStyle",value:function(){return["width: 100%;","height: 100%;","padding: .5625rem;","color: #8798a9;","vertical-align: middle;","line-height: 1.5;","font-weight: 500;","background-color: #fff;","border: .0625rem solid #d1d9e0;","border-radius: .1875rem;"].concat()}},{key:"getClientConfig",value:function(e){return{fields:{cardpan:{selector:"cardpan",type:"text",style:this.getFieldStyle()},cardcvc2:{selector:"cardcvc2",type:"password",size:"4",maxlength:"4",style:this.getFieldStyle()},cardexpiremonth:{selector:"cardexpiremonth",type:"select",size:"2",maxlength:"2",style:this.getSelectStyle()},cardexpireyear:{selector:"cardexpireyear",type:"select",style:this.getSelectStyle()}},language:e,defaultStyle:{iframe:{height:"100%",width:"100%"}},autoCardtypeDetection:{supportedCardtypes:t.options.supportedCardtypes,callback:this.cardDetectionCallback}}}},{key:"cardDetectionCallback",value:function(e){if("-"!==e&&"?"!==e){var t="https://cdn.pay1.de/cc/"+e.toLowerCase()+"/xl/default.png",n=document.getElementById("errorOutput"),r=document.getElementById("card-logo");r.setAttribute("src",t),n.style.display="none",r.style.display="block"}}},{key:"createScript",value:function(e){var t=document.createElement("script");t.type="text/javascript",t.src="https://secure.pay1.de/client-api/js/v1/payone_hosted_min.js",t.addEventListener("load",e.bind(this),!1),document.head.appendChild(t)}},{key:"handleOrderSubmit",value:function(e){document.getElementById("errorOutput").style.display="none";var t=document.getElementById("savedpseudocardpan");return!!(t&&t.value.length>0)||(!this.iframe.isComplete()||this.orderFormDisabled?(this.iframe.creditCardCheck("payoneCheckCallback"),e.preventDefault(),!1):void 0)}},{key:"payoneCheckCallback",value:function(e){if("VALID"===e.status)document.getElementById("pseudocardpan").value=e.pseudocardpan,document.getElementById("truncatedcardpan").value=e.truncatedcardpan,this.orderFormDisabled=!1,document.getElementById("confirmOrderForm").submit();else{var t=document.getElementById("confirmFormSubmit"),n=document.getElementById("errorOutput");t.removeAttribute("disabled"),n.innerHTML=e.errormessage,n.style.display="block"}}}])&&o(n.prototype,i),s&&o(n,s),t}();f={supportedCardtypes:["#","V","A","M","D","J","O","U","P"]},(l="options")in(s=d)?Object.defineProperty(s,l,{value:f,enumerable:!0,configurable:!0,writable:!0}):s[l]=f,window.PluginManager.register("PayonePaymentCreditCard",d,"[data-is-payone-credit-card]")},7:function(e,t,n){e.exports=function(){"use strict";var e=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var n=Object.prototype.toString.call(e);return"[object RegExp]"===n||"[object Date]"===n||function(e){return e.$$typeof===t}(e)}(e)},t="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?o((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function r(e,t,r){return e.concat(t).map(function(e){return n(e,r)})}function i(e,t,r){var i={};return r.isMergeableObject(e)&&Object.keys(e).forEach(function(t){i[t]=n(e[t],r)}),Object.keys(t).forEach(function(a){r.isMergeableObject(t[a])&&e[a]?i[a]=function(e,t){if(!t.customMerge)return o;var n=t.customMerge(e);return"function"==typeof n?n:o}(a,r)(e[a],t[a],r):i[a]=n(t[a],r)}),i}function o(t,o,a){(a=a||{}).arrayMerge=a.arrayMerge||r,a.isMergeableObject=a.isMergeableObject||e;var u=Array.isArray(o),c=Array.isArray(t),s=u===c;return s?u?a.arrayMerge(t,o,a):i(t,o,a):n(o,a)}return o.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,n){return o(e,n,t)},{})},o}()}});
//# sourceMappingURL=payone-payment.js.map