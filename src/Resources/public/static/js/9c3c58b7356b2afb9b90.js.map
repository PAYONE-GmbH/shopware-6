{"version":3,"file":"static/js/9c3c58b7356b2afb9b90.js","mappings":"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","sources":["webpack://administration/../../../../../../custom/plugins/PayonePayment/src/Resources/app/administration/src/module/sw-order/component/payone-payment-order-action-log/index.js","webpack://administration/../../../../../../custom/plugins/PayonePayment/src/Resources/app/administration/src/module/sw-order/component/payone-payment-order-action-log/payone-payment-order-action-log.html.twig"],"sourcesContent":["import template from './payone-payment-order-action-log.html.twig';\n\nconst {Criteria} = Shopware.Data;\nconst { Filter } = Shopware;\n\nexport default {\n    template,\n\n    inject: ['repositoryFactory'],\n\n    props: {\n        order: {\n            type: Object,\n            required: true,\n        },\n    },\n\n    data() {\n        return {\n            orderActionLogs: [],\n            isLoading: false,\n            showRequestDetails: null,\n            showResponseDetails: null,\n        };\n    },\n\n    computed: {\n        orderActionLogRepository() {\n            return this.repositoryFactory.create('payone_payment_order_action_log');\n        },\n\n        dateFilter() {\n            return Filter.getByName('date');\n        },\n\n        currencyFilter() {\n            return Filter.getByName('currency');\n        },\n\n        assetFilter() {\n            return Filter.getByName('asset');\n        },\n\n        payoneCurrencyFilter() {\n            return Filter.getByName('payone_currency');\n        },\n\n        orderActionLogColumns() {\n            return [\n                {\n                    property: 'transactionId',\n                    label: this.$tc('sw-order.payone-payment.orderActionLog.columnTitleTransactionId')\n                },\n                {\n                    property: 'request',\n                    label: this.$tc('sw-order.payone-payment.orderActionLog.columnTitleRequest')\n                },\n                {\n                    property: 'response',\n                    label: this.$tc('sw-order.payone-payment.orderActionLog.columnTitleResponse')\n                },\n                {\n                    property: 'amount',\n                    label: this.$tc('sw-order.payone-payment.orderActionLog.columnTitleAmount')\n                },\n                {\n                    property: 'requestDateTime',\n                    label: this.$tc('sw-order.payone-payment.orderActionLog.columnTitleRequestDateTime')\n                },\n            ];\n        },\n\n        keyValueColumns() {\n            return [\n                {property: 'key', label: this.$tc('sw-order.payone-payment.orderActionLog.columnTitleKey')},\n                {property: 'value', label: this.$tc('sw-order.payone-payment.orderActionLog.columnTitleValue')},\n            ];\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.getOrderActionLogs();\n        },\n\n        reloadActionLogs() {\n            this.getOrderActionLogs();\n        },\n\n        getOrderActionLogs() {\n            const criteria = new Criteria();\n            criteria.addFilter(Criteria.equals('orderId', this.order.id));\n            criteria.addSorting(Criteria.sort('requestDateTime', 'ASC', true));\n\n            this.isLoading = true;\n            return this.orderActionLogRepository.search(criteria, Shopware.Context.api).then((searchResult) => {\n                this.orderActionLogs = searchResult;\n                this.isLoading = false;\n            });\n        },\n\n        openRequest(orderActionLog) {\n            this.showRequestDetails = orderActionLog.requestDetails;\n        },\n\n        openResponse(orderActionLog) {\n            this.showResponseDetails = orderActionLog.responseDetails;\n        },\n\n        onCloseRequestModal() {\n            this.showRequestDetails = null;\n        },\n\n        onCloseResponseModal() {\n            this.showResponseDetails = null;\n        },\n\n        toKeyValueSource(object) {\n            const data = [];\n\n            for (const key in object) {\n                data.push({key, value: object[key]});\n            }\n\n            data.sort((a, b) => a.key.localeCompare(b.key));\n\n            return data;\n        },\n\n        downloadAsTxt(object, objectType, id) {\n            const link = document.createElement('a');\n            link.href = 'data:text/plain;charset=utf-8,' + encodeURIComponent(JSON.stringify(object, null, 4));\n            link.download = `PAYONE-${objectType}-${id}.txt`;\n            link.dispatchEvent(new MouseEvent('click'));\n            link.remove();\n        },\n    }\n};\n","export default \"{% block payone_payment_order_action_log %}\\n    <sw-card\\n            class=\\\"payone-payment-order-action-log-card\\\"\\n            position-identifier=\\\"payone-payment-order-action-log-card\\\"\\n            :title=\\\"$tc('sw-order.payone-payment.orderActionLog.cardTitle')\\\"\\n    >\\n        <sw-data-grid\\n                v-if=\\\"orderActionLogs.length > 0\\\"\\n                :showSelection=\\\"false\\\"\\n                :dataSource=\\\"orderActionLogs\\\"\\n                :columns=\\\"orderActionLogColumns\\\"\\n                :isLoading=\\\"isLoading\\\"\\n        >\\n            <template #column-amount=\\\"{ item }\\\">\\n                {{ currencyFilter(item.amount / 100, order.currency.isoCode) }}\\n            </template>\\n\\n            <template #column-requestDateTime=\\\"{ item }\\\">\\n                {{ dateFilter(item.requestDateTime, { hour: '2-digit', minute: '2-digit' }) }}\\n            </template>\\n\\n            <template #actions=\\\"{ item }\\\">\\n                <sw-context-menu-item @click=\\\"openRequest(item)\\\">\\n                    {{ $tc('sw-order.payone-payment.orderActionLog.contextMenu.openRequestDetails') }}\\n                </sw-context-menu-item>\\n                <sw-context-menu-item @click=\\\"openResponse(item)\\\">\\n                    {{ $tc('sw-order.payone-payment.orderActionLog.contextMenu.openResponseDetails') }}\\n                </sw-context-menu-item>\\n            </template>\\n\\n            <template #action-modals=\\\"{ item }\\\">\\n                <sw-modal\\n                        v-if=\\\"showRequestDetails\\\"\\n                        :title=\\\"$tc('sw-order.payone-payment.orderActionLog.requestDetailsModal.title')\\\"\\n                        variant=\\\"large\\\"\\n                        @modal-close=\\\"onCloseRequestModal\\\"\\n                >\\n                    <sw-button variant=\\\"primary\\\" @click=\\\"downloadAsTxt(showRequestDetails, 'request', item.transactionId)\\\">\\n                        {{ $tc('sw-order.payone-payment.orderActionLog.requestDetailsModal.downloadButton') }}\\n                    </sw-button>\\n                    <sw-data-grid\\n                            :showSelection=\\\"false\\\"\\n                            :showActions=\\\"false\\\"\\n                            :dataSource=\\\"toKeyValueSource(showRequestDetails)\\\"\\n                            :columns=\\\"keyValueColumns\\\"\\n                            :isLoading=\\\"isLoading\\\"\\n                    >\\n                    </sw-data-grid>\\n                </sw-modal>\\n                <sw-modal\\n                        v-if=\\\"showResponseDetails\\\"\\n                        :title=\\\"$tc('sw-order.payone-payment.orderActionLog.responseDetailsModal.title')\\\"\\n                        variant=\\\"large\\\"\\n                        @modal-close=\\\"onCloseResponseModal\\\"\\n                >\\n                    <sw-button variant=\\\"primary\\\" @click=\\\"downloadAsTxt(showResponseDetails, 'response', item.transactionId)\\\">\\n                        {{ $tc('sw-order.payone-payment.orderActionLog.responseDetailsModal.downloadButton') }}\\n                    </sw-button>\\n                    <sw-data-grid\\n                            :showSelection=\\\"false\\\"\\n                            :showActions=\\\"false\\\"\\n                            :dataSource=\\\"toKeyValueSource(showResponseDetails)\\\"\\n                            :columns=\\\"keyValueColumns\\\"\\n                            :isLoading=\\\"isLoading\\\"\\n                    >\\n                    </sw-data-grid>\\n                </sw-modal>\\n            </template>\\n        </sw-data-grid>\\n\\n        <sw-empty-state\\n                v-else\\n                :absolute=\\\"false\\\"\\n                :title=\\\"$tc('sw-order.payone-payment.orderActionLog.emptyState.title')\\\"\\n                :subline=\\\"$tc('sw-order.payone-payment.orderActionLog.emptyState.subline')\\\"\\n        >\\n            <template #icon>\\n                <img\\n                        :src=\\\"assetFilter('/administration/static/img/empty-states/order-empty-state.svg')\\\"\\n                        :alt=\\\"$tc('sw-order.payone-payment.orderActionLog.emptyState.title')\\\"\\n                >\\n            </template>\\n        </sw-empty-state>\\n    </sw-card>\\n{% endblock %}\\n\";"],"names":["Criteria","Shopware","Data","Filter","template","inject","props","order","type","Object","required","data","orderActionLogs","isLoading","showRequestDetails","showResponseDetails","computed","orderActionLogRepository","repositoryFactory","create","dateFilter","getByName","currencyFilter","assetFilter","payoneCurrencyFilter","orderActionLogColumns","property","label","$tc","keyValueColumns","created","createdComponent","methods","getOrderActionLogs","reloadActionLogs","criteria","addFilter","equals","id","addSorting","sort","search","Context","api","then","searchResult","openRequest","orderActionLog","requestDetails","openResponse","responseDetails","onCloseRequestModal","onCloseResponseModal","toKeyValueSource","object","key","push","value","a","b","localeCompare","downloadAsTxt","objectType","link","document","createElement","href","encodeURIComponent","JSON","stringify","download","dispatchEvent","MouseEvent","remove"],"sourceRoot":""}