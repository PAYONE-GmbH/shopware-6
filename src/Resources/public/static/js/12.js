(this["webpackJsonpPluginpayone-payment"]=this["webpackJsonpPluginpayone-payment"]||[]).push([[12],{BCCO:function(e,o,t){"use strict";t.r(o);var n=Shopware.Data.Criteria;o.default={template:'{% block payone_payment_webhook_log %}\n    <sw-card\n            class="payone-payment-webhook-log-card"\n            position-identifier="payone-payment-webhook-log-card"\n            :title="$tc(\'sw-order.payone-payment.webhookLog.cardTitle\')"\n    >\n        <sw-data-grid\n                v-if="webhookLogs.length > 0"\n                :showSelection="false"\n                :dataSource="webhookLogs"\n                :columns="webhookLogColumns"\n                :isLoading="isLoading"\n        >\n            <template #column-webhookDateTime="{ item }">\n                {{ item.webhookDateTime | date({ hour: \'2-digit\', minute: \'2-digit\' }) }}\n            </template>\n\n            <template #actions="{ item }">\n                <sw-context-menu-item @click="openDetails(item)">\n                    {{ $tc(\'sw-order.payone-payment.webhookLog.contextMenu.openWebhookDetails\') }}\n                </sw-context-menu-item>\n            </template>\n\n            <template #action-modals="{ item }">\n                <sw-modal\n                        v-if="showWebhookDetails"\n                        :title="$tc(\'sw-order.payone-payment.webhookLog.webhookDetailsModal.title\')"\n                        variant="large"\n                        @modal-close="onCloseWebhookModal"\n                >\n                    <sw-button variant="primary" @click="downloadAsTxt(showWebhookDetails, \'webhook\', item.transactionId)">\n                        {{ $tc(\'sw-order.payone-payment.webhookLog.webhookDetailsModal.downloadButton\') }}\n                    </sw-button>\n                    <sw-data-grid\n                            :showSelection="false"\n                            :showActions="false"\n                            :dataSource="toKeyValueSource(showWebhookDetails)"\n                            :columns="keyValueColumns"\n                            :isLoading="isLoading"\n                    >\n                    </sw-data-grid>\n                </sw-modal>\n            </template>\n        </sw-data-grid>\n\n        <sw-empty-state\n                v-else\n                :absolute="false"\n                :title="$tc(\'sw-order.payone-payment.webhookLog.emptyState.title\')"\n                :subline="$tc(\'sw-order.payone-payment.webhookLog.emptyState.subline\')"\n        >\n            <template #icon>\n                <img\n                        :src="\'/administration/static/img/empty-states/order-empty-state.svg\' | asset"\n                        :alt="$tc(\'sw-order.payone-payment.webhookLog.emptyState.title\')"\n                >\n            </template>\n        </sw-empty-state>\n    </sw-card>\n{% endblock %}\n',inject:["repositoryFactory"],props:{order:{type:Object,required:!0}},data:function(){return{webhookLogs:[],isLoading:!1,showWebhookDetails:null}},computed:{webhookLogRepository:function(){return this.repositoryFactory.create("payone_payment_webhook_log")},webhookLogColumns:function(){return[{property:"transactionId",label:this.$tc("sw-order.payone-payment.webhookLog.columnTitleTransactionId")},{property:"transactionState",label:this.$tc("sw-order.payone-payment.webhookLog.columnTitleTransactionState")},{property:"sequenceNumber",label:this.$tc("sw-order.payone-payment.webhookLog.columnTitleSequenceNumber")},{property:"clearingType",label:this.$tc("sw-order.payone-payment.webhookLog.columnTitleClearingType")},{property:"webhookDateTime",label:this.$tc("sw-order.payone-payment.webhookLog.columnTitleWebhookDateTime")}]},keyValueColumns:function(){return[{property:"key",label:this.$tc("sw-order.payone-payment.webhookLog.columnTitleKey")},{property:"value",label:this.$tc("sw-order.payone-payment.webhookLog.columnTitleValue")}]}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.getWebhookLogs()},reloadWebhookLogs:function(){this.getWebhookLogs()},getWebhookLogs:function(){var e=this,o=new n;return o.addFilter(n.equals("orderId",this.order.id)),o.addSorting(n.sort("webhookDateTime","ASC",!0)),this.isLoading=!0,this.webhookLogRepository.search(o,Shopware.Context.api).then((function(o){e.webhookLogs=o,e.isLoading=!1}))},openDetails:function(e){this.showWebhookDetails=e.webhookDetails},onCloseWebhookModal:function(){this.showWebhookDetails=null},toKeyValueSource:function(e){var o=[];for(var t in e)o.push({key:t,value:e[t]});return o.sort((function(e,o){return e.key.localeCompare(o.key)})),o},downloadAsTxt:function(e,o,t){var n=document.createElement("a");n.href="data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,4)),n.download="PAYONE-".concat(o,"-").concat(t,".txt"),n.dispatchEvent(new MouseEvent("click")),n.remove()}}}}}]);