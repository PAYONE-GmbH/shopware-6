(window["webpackJsonpPluginpayone-payment"]=window["webpackJsonpPluginpayone-payment"]||[]).push([[369],{927:function(){},369:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}}),n(320);let{Utils:r}=Shopware;var i={template:'{% block payone_ratepay_profiles %}\n    <div class="payone-ratepay-profiles">\n        {% block payone_ratepay_shop_ids %}\n            <h3>{{ $tc(\'payone-payment.general.headlines.ratepayProfiles\') }}</h3>\n            <sw-container slot="grid" type="row" class="">\n\n                {% block payone_ratepay_shop_ids_actions %}\n                    <sw-container class="sw-card__toolbar"\n                                  columns="1fr">\n\n                        {% block payone_ratepay_shop_ids_create_actions %}\n                            <div align="right">\n                                <sw-button class=""\n                                           size="small"\n                                           @click="createNewLineItem">\n                                    {{ $tc(\'payone-payment.general.actions.addShop\') }}\n                                </sw-button>\n                            </div>\n                        {% endblock %}\n                    </sw-container>\n                {% endblock %}\n\n                {% block payone_ratepay_shop_ids_grid %}\n                    <sw-data-grid v-if="value"\n                                  ref="shopIdsDataGrid"\n                                  :dataSource="profiles"\n                                  :columns="getLineItemColumns"\n                                  :fullPage="false"\n                                  :showSettings="false"\n                                  :showSelection="false"\n                                  :showActions="true"\n                                  :allowColumnEdit="false"\n                                  :allowInlineEdit="true"\n                                  :compactMode="true"\n                                  identifier="sw-order-line-item-grid"\n                                  class="sw-order-line-items-grid__data-grid"\n                                  @inline-edit-save="onInlineEditSave"\n                                  @inline-edit-cancel="onInlineEditCancel">\n                        {% block payone_ratepay_shop_ids_grid_columns %}\n                            {% block payone_ratepay_shop_ids_grid_column_status %}\n                                <template #column-error="{ item, column }">\n                                    <sw-icon v-tooltip="{\n                                                message: item.error,\n                                                width: 150,\n                                                position: \'bottom\'\n                                             }"\n                                             v-if="item.error"\n                                             name="regular-exclamation-triangle"\n                                             color="red">\n                                    </sw-icon>\n                                </template>\n                            {% endblock %}\n\n                            {% block payone_ratepay_shop_ids_bulk_actions %}\n                                <template #actions="{ item }">\n                                    {% block sw_settings_units_content_grid_column_menu_delete %}\n                                        <sw-context-menu-item @click="onDeleteSelectedItem(item)" variant="danger">\n                                            {{ $tc(\'global.default.delete\') }}\n                                        </sw-context-menu-item>\n                                    {% endblock %}\n                                </template>\n                            {% endblock %}\n                        {% endblock %}\n                    </sw-data-grid>\n                {% endblock %}\n\n                {% block payone_ratepay_shop_ids_error %}\n                    <sw-alert v-if="showDuplicateAlert" variant="error">\n                        {{ $tc(\'payone-payment.general.errors.existingShopId\') }}\n                    </sw-alert>\n\n                    <sw-alert v-if="showEmptyAlert" variant="error">\n                        {{ $tc(\'payone-payment.general.errors.emptyInputs\') }}\n                    </sw-alert>\n                {% endblock %}\n        </sw-container>\n        {% endblock %}\n    </div>\n{% endblock %}\n',props:{value:{type:Array,required:!1,default(){return[]}},name:{type:String,required:!0}},data(){return{selectedItems:{},newItem:null,showDuplicateAlert:!1,showEmptyAlert:!1,profiles:this.value}},computed:{getLineItemColumns(){return[{property:"shopId",dataIndex:"shopId",label:this.$tc("payone-payment.general.label.shopId"),allowResize:!1,inlineEdit:"string",width:"200px",primary:!0},{property:"currency",dataIndex:"currency",label:this.$tc("payone-payment.general.label.currency"),allowResize:!1,inlineEdit:"string",width:"200px",primary:!0},{property:"error",label:this.$tc("payone-payment.general.label.error"),allowResize:!1,width:"100px",primary:!0}]}},watch:{profiles(e){this.$emit("update:value",e),this.$emit("input",e),this.$emit("change",e)}},created(){this.createdComponent()},destroyed(){this.destroyedComponent()},methods:{createdComponent(){this.$root.$on("payone-ratepay-profiles-update-result",this.onProfilesUpdateResult)},destroyedComponent(){this.$root.$off("payone-ratepay-profiles-update-result")},onProfilesUpdateResult(e){if(e.updates[this.name]&&(this.profiles=e.updates[this.name]),e.errors[this.name])for(let t of e.errors[this.name])this.profiles.push(t)},onInlineEditCancel(e){""===e.shopId&&""===e.currency&&this.profiles.forEach(function(t,n,r){t.id===e.id&&r.splice(n,1)}),this.$emit("item-cancel")},onInlineEditSave(e){if(""!==e.shopId&&""!==e.currency){this.showEmptyAlert=!1;let t=!1;this.profiles.forEach(function(n){n.id!==e.id&&n.shopId===e.shopId&&(t=!0)}),t?(this.showDuplicateAlert=!0,this.$nextTick(()=>{this.$refs.shopIdsDataGrid.currentInlineEditId=e.id,this.$refs.shopIdsDataGrid.enableInlineEdit()})):this.showDuplicateAlert=!1}else this.showEmptyAlert=!0,this.$nextTick(()=>{this.$refs.shopIdsDataGrid.currentInlineEditId=e.id,this.$refs.shopIdsDataGrid.enableInlineEdit()});this.$emit("update-list",this.profiles)},createNewLineItem(){if(0===this.profiles.length){this.createLine();return}""!==this.profiles[this.profiles.length-1].shopId&&this.createLine()},createLine(){let e=r.createId();this.profiles.push({id:e,shopId:"",currency:""}),this.$nextTick(()=>{this.$refs.shopIdsDataGrid.currentInlineEditId=e,this.$refs.shopIdsDataGrid.enableInlineEdit()})},onDeleteSelectedItem(e){this.profiles=this.profiles.filter(t=>t.shopId!==e.shopId),this.$emit("deleted",this.profiles)}}}},320:function(e,t,n){var r=n(927);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals),n(346).Z("1fea8bf1",r,!0,{})},346:function(e,t,n){"use strict";function r(e,t){for(var n=[],r={},i=0;i<t.length;i++){var s=t[i],a=s[0],o={id:e+":"+i,css:s[1],media:s[2],sourceMap:s[3]};r[a]?r[a].parts.push(o):n.push(r[a]={id:a,parts:[o]})}return n}n.d(t,{Z:function(){return f}});var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s={},a=i&&(document.head||document.getElementsByTagName("head")[0]),o=null,l=0,d=!1,p=function(){},c=null,h="data-vue-ssr-id",u="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,t,n,i){d=n,c=i||{};var a=r(e,t);return m(a),function(t){for(var n=[],i=0;i<a.length;i++){var o=s[a[i].id];o.refs--,n.push(o)}t?m(a=r(e,t)):a=[];for(var i=0;i<n.length;i++){var o=n[i];if(0===o.refs){for(var l=0;l<o.parts.length;l++)o.parts[l]();delete s[o.id]}}}}function m(e){for(var t=0;t<e.length;t++){var n=e[t],r=s[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(g(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{for(var a=[],i=0;i<n.parts.length;i++)a.push(g(n.parts[i]));s[n.id]={id:n.id,refs:1,parts:a}}}}function y(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function g(e){var t,n,r=document.querySelector("style["+h+'~="'+e.id+'"]');if(r){if(d)return p;r.parentNode.removeChild(r)}if(u){var i=l++;t=v.bind(null,r=o||(o=y()),i,!1),n=v.bind(null,r,i,!0)}else t=_.bind(null,r=y()),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){r?(r.css!==e.css||r.media!==e.media||r.sourceMap!==e.sourceMap)&&t(e=r):n()}}var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function v(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var s=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(s,a[t]):e.appendChild(s)}}function _(e,t){var n=t.css,r=t.media,i=t.sourceMap;if(r&&e.setAttribute("media",r),c.ssrId&&e.setAttribute(h,t.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}}]);