const a=`{% block payone_ratepay_profiles %} <div class="payone-ratepay-profiles"> {% block payone_ratepay_shop_ids %} <h3> {{ $t('payone-payment.general.headlines.ratepayProfiles') }} </h3> <sw-container slot="grid" type="row" class > {% block payone_ratepay_shop_ids_actions %} <sw-container class="sw-card__toolbar" columns="1fr" > {% block payone_ratepay_shop_ids_create_actions %} <div align="right"> <mt-button class size="small" @click="createNewLineItem" variant="primary" > {{ $t('payone-payment.general.actions.addShop') }} </mt-button> </div> {% endblock %} </sw-container> {% endblock %} {% block payone_ratepay_shop_ids_grid %} <sw-data-grid v-if="value" ref="shopIdsDataGrid" :dataSource="profiles" :columns="getLineItemColumns" :fullPage="false" :showSettings="false" :showSelection="false" :showActions="true" :allowColumnEdit="false" :allowInlineEdit="true" :compactMode="true" identifier="sw-order-line-item-grid" class="sw-order-line-items-grid__data-grid" @inline-edit-save="onInlineEditSave" @inline-edit-cancel="onInlineEditCancel" > {% block payone_ratepay_shop_ids_grid_columns %} {% block payone_ratepay_shop_ids_grid_column_status %} <template #column-error="{ item, column }"> <mt-icon v-tooltip="{ message: item.error, width: 150, position: 'bottom' }" v-if="item.error" name="regular-exclamation-triangle" color="red" size="24px" > </mt-icon> </template> {% endblock %} {% block payone_ratepay_shop_ids_bulk_actions %} <template #actions="{ item }"> {% block sw_settings_units_content_grid_column_menu_delete %} <sw-context-menu-item @click="onDeleteSelectedItem(item)" variant="danger" > {{ $t('global.default.delete') }} </sw-context-menu-item> {% endblock %} </template> {% endblock %} {% endblock %} </sw-data-grid> {% endblock %} {% block payone_ratepay_shop_ids_error %} <mt-banner v-if="showDuplicateAlert" variant="critical" > {{ $t('payone-payment.general.errors.existingShopId') }} </mt-banner> <mt-banner v-if="showEmptyAlert" variant="critical" > {{ $t('payone-payment.general.errors.emptyInputs') }} </mt-banner> {% endblock %} </sw-container> {% endblock %} </div> {% endblock %}`,{Utils:n}=Shopware,o={template:a,props:{value:{type:Array,required:!1,default(){return[]}},name:{type:String,required:!0}},data(){return{selectedItems:{},newItem:null,showDuplicateAlert:!1,showEmptyAlert:!1,profiles:this.value}},computed:{getLineItemColumns(){return[{property:"shopId",dataIndex:"shopId",label:this.$t("payone-payment.general.label.shopId"),allowResize:!1,inlineEdit:"string",width:"200px",primary:!0},{property:"currency",dataIndex:"currency",label:this.$t("payone-payment.general.label.currency"),allowResize:!1,inlineEdit:"string",width:"200px",primary:!0},{property:"error",label:this.$t("payone-payment.general.label.error"),allowResize:!1,width:"100px",primary:!0}]}},watch:{profiles(e){this.$emit("update:value",e),this.$emit("input",e),this.$emit("change",e)}},created(){this.createdComponent()},destroyed(){this.destroyedComponent()},methods:{createdComponent(){Shopware.Utils.EventBus.on("payone-ratepay-profiles-update-result",this.onProfilesUpdateResult)},destroyedComponent(){Shopware.Utils.EventBus.off("payone-ratepay-profiles-update-result")},onProfilesUpdateResult(e){if(e.updates[this.name]&&(this.profiles=e.updates[this.name]),e.errors[this.name])for(const t of e.errors[this.name])this.profiles.push(t)},onInlineEditCancel(e){e.shopId===""&&e.currency===""&&this.profiles.forEach(function(t,i,s){t.id===e.id&&s.splice(i,1)}),this.$emit("item-cancel")},onInlineEditSave(e){if(e.shopId!==""&&e.currency!==""){this.showEmptyAlert=!1;let t=!1;this.profiles.forEach(function(i){i.id!==e.id&&i.shopId===e.shopId&&(t=!0)}),t?(this.showDuplicateAlert=!0,this.$nextTick(()=>{this.$refs.shopIdsDataGrid.currentInlineEditId=e.id,this.$refs.shopIdsDataGrid.enableInlineEdit()})):this.showDuplicateAlert=!1}else this.showEmptyAlert=!0,this.$nextTick(()=>{this.$refs.shopIdsDataGrid.currentInlineEditId=e.id,this.$refs.shopIdsDataGrid.enableInlineEdit()});this.$emit("update-list",this.profiles)},createNewLineItem(){let e=!1;if(e=this.profiles.length===0,e){this.createLine();return}this.profiles[this.profiles.length-1].shopId!==""&&this.createLine()},createLine(){const e=n.createId();this.profiles.push({id:e,shopId:"",currency:""}),this.$nextTick(()=>{this.$refs.shopIdsDataGrid.currentInlineEditId=e,this.$refs.shopIdsDataGrid.enableInlineEdit()})},onDeleteSelectedItem(e){this.profiles=this.profiles.filter(t=>t.shopId!==e.shopId),this.$emit("deleted",this.profiles)}}};export{o as default};
//# sourceMappingURL=index-DyAX5SD_.js.map
